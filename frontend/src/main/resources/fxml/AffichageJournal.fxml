<?xml version="1.0" encoding="UTF-8"?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.text.*?>
<?import javafx.geometry.Insets?>

<BorderPane xmlns="http://javafx.com/javafx"
            xmlns:fx="http://javafx.com/fxml"
            fx:controller="com.innertrack.controller.AffichageJournalController"
            stylesheets="@../css/components/journal.css">

    <!-- ============ EN-TÃŠTE ============ -->
    <top>
        <VBox spacing="0">
            <HBox styleClass="header" alignment="CENTER_LEFT" spacing="20">
                <padding><Insets top="20" right="30" bottom="20" left="30"/></padding>
                <VBox spacing="4" HBox.hgrow="ALWAYS">
                    <Label text="ðŸ““ Journal Intime" styleClass="title" style="-fx-font-size: 24px;"/>
                    <Label text="Consultez, ajoutez et gÃ©rez vos entrÃ©es de journal" styleClass="subtitle" style="-fx-font-size: 13px;"/>
                </VBox>
                <Button text="+ Nouvelle EntrÃ©e" styleClass="add-test-btn"
                        onAction="#ajouterNouveauJournal" style="-fx-font-size: 14px; -fx-font-weight: bold;"/>
            </HBox>

            <HBox alignment="CENTER_LEFT" spacing="15"
                  style="-fx-background-color: white; -fx-border-color: #e2e8f0; -fx-border-width: 0 0 1 0;">
                <padding><Insets top="15" right="30" bottom="15" left="30"/></padding>
                <TextField fx:id="searchField"
                           promptText="Rechercher une entrÃ©e..."
                           prefWidth="300"
                           styleClass="search-field"/>
                <Button fx:id="clearButton" text="âŒ" styleClass="icon-button"/>
                <Region HBox.hgrow="ALWAYS"/>
                <Button text="ðŸ“„ Export PDF" onAction="#exporterPDF" styleClass="export-button"/>
            </HBox>
        </VBox>
    </top>
    <!-- ============ CONTENU PRINCIPAL ============ -->
    <center>
        <VBox spacing="0" style="-fx-background-color: #f5f7fa;">

            <!-- Barre de statistiques -->
            <HBox spacing="15" style="-fx-background-color: white; -fx-border-color: #e2e8f0; -fx-border-width: 0 0 1 0;">
                <padding><Insets top="15" right="30" bottom="15" left="30"/></padding>
                <HBox styleClass="stat-card" spacing="10" alignment="CENTER" prefWidth="150">
                    <VBox alignment="CENTER" spacing="2">
                        <Label fx:id="totalEntreesLabel" text="0" styleClass="stat-number" style="-fx-font-size: 28px;"/>
                        <Label text="EntrÃ©es" styleClass="stat-label"/>
                    </VBox>
                </HBox>
                <HBox styleClass="stat-card" spacing="10" alignment="CENTER" prefWidth="150">
                    <VBox alignment="CENTER" spacing="2">
                        <Label fx:id="moyenneHumeurLabel" text="â€”" styleClass="stat-number" style="-fx-font-size: 28px;"/>
                        <Label text="Humeur moyenne" styleClass="stat-label"/>
                    </VBox>
                </HBox>
            </HBox>

            <!-- Tableau des entrÃ©es -->
            <ScrollPane fitToWidth="true" styleClass="scroll-pane" VBox.vgrow="ALWAYS" style="-fx-padding: 20;">
                <VBox spacing="10">
                    <padding><Insets top="5" right="5" bottom="5" left="5"/></padding>

                    <!-- En-tÃªte du tableau -->
                    <HBox styleClass="section-box" alignment="CENTER_LEFT" spacing="10">
                        <padding><Insets top="12" right="20" bottom="12" left="20"/></padding>
                        <Label text="ðŸ“‹  Mes EntrÃ©es de Journal" styleClass="section-title" style="-fx-font-size: 16px;" HBox.hgrow="ALWAYS"/>
                    </HBox>

                    <!-- TableView stylisÃ©e -->
                    <TableView fx:id="journalTable" VBox.vgrow="ALWAYS" minHeight="150"
                               style="-fx-background-color: white; -fx-border-color: #e2e8f0; -fx-border-radius: 10px; -fx-background-radius: 10px; -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.07), 8, 0, 0, 2);">
                        <columns>
                            <TableColumn fx:id="humeurColumn" text="ðŸ˜Š Humeur" prefWidth="150"
                                         style="-fx-font-weight: bold; -fx-font-size: 13px;"/>
                            <TableColumn fx:id="noteColumn" text="ðŸ“ Note" prefWidth="1200"
                                         style="-fx-font-weight: bold; -fx-font-size: 13px;"/>
                            <TableColumn fx:id="dateColumn" text="ðŸ“… Date" prefWidth="150"
                                         style="-fx-font-weight: bold; -fx-font-size: 13px;"/>
                        </columns>
                        <placeholder>
                            <VBox alignment="CENTER" spacing="10">
                                <Label text="ðŸ““" style="-fx-font-size: 48px; -fx-text-fill: #cbd5e0;"/>
                                <Label text="Aucune entrÃ©e pour le moment" styleClass="empty-title" style="-fx-font-size: 16px;"/>
                                <Label text="Cliquez sur &quot;+ Nouvelle EntrÃ©e&quot; pour commencer" styleClass="empty-subtitle"/>
                            </VBox>
                        </placeholder>
                    </TableView>
                </VBox>
            </ScrollPane>
        </VBox>
    </center>

    <!-- ============ PIED DE PAGE ============ -->
    <bottom>
        <HBox styleClass="footer" alignment="CENTER_RIGHT" spacing="10">
            <padding><Insets top="15" right="20" bottom="15" left="20"/></padding>
            <Label fx:id="statusLabel" text="" styleClass="status-label" HBox.hgrow="ALWAYS"/>
            <Button text="âœï¸ Modifier" styleClass="edit-btn-header"
                    onAction="#modifierJournal"/>
            <Button text="ðŸ—‘ï¸ Supprimer" styleClass="delete-btn-header"
                    onAction="#supprimerJournal"/>
            <Button text="ðŸ”„ Habitudes" styleClass="refresh-btn"
                    onAction="#allerAuxHabitudes"/>
        </HBox>
    </bottom>
</BorderPane>