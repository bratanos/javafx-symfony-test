<?xml version="1.0" encoding="UTF-8"?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.text.*?>
<?import javafx.geometry.Insets?>

<BorderPane xmlns="http://javafx.com/javafx"
            xmlns:fx="http://javafx.com/fxml"
            fx:controller="com.innertrack.controller.AffichageHabitudeController"
            stylesheets="@../css/components/journal.css">

    <!-- ============ EN-TÃŠTE ============ -->
    <top>
        <HBox styleClass="section-box" alignment="CENTER_LEFT" spacing="15">
            <padding><Insets top="12" right="20" bottom="12" left="20"/></padding>

            <Label text="ðŸŒ¿  Liste des Habitudes"
                   styleClass="section-title"
                   style="-fx-font-size: 16px;"
                   HBox.hgrow="ALWAYS"/>

            <!-- Barre de recherche -->
            <TextField fx:id="searchField"
                       promptText="ðŸ”Ž Rechercher une habitude..."
                       prefWidth="250"/>

            <HBox spacing="10">
                <Button text="ðŸ”" onAction="#rechercherHabitude"/>
                <Button text="âŒ" onAction="#viderRecherche"/>
            </HBox>

            <Button text="ðŸ“„ Export PDF"
                    onAction="#exporterPDF"
                    styleClass="refresh-btn"/>
        </HBox>
    </top>

    <center>
        <VBox spacing="0" style="-fx-background-color: #f5f7fa;">

            <!-- Barre de statistiques -->
            <HBox spacing="15" style="-fx-background-color: white; -fx-border-color: #e2e8f0; -fx-border-width: 0 0 1 0;">
                <padding><Insets top="15" right="30" bottom="15" left="30"/></padding>
                <HBox styleClass="stat-card" spacing="10" alignment="CENTER" prefWidth="150">
                    <VBox alignment="CENTER" spacing="2">
                        <Label fx:id="totalHabitudesLabel" text="0" styleClass="stat-number" style="-fx-font-size: 28px;"/>
                        <Label text="Habitudes" styleClass="stat-label"/>
                    </VBox>
                </HBox>
                <HBox styleClass="stat-card" spacing="10" alignment="CENTER" prefWidth="150">
                    <VBox alignment="CENTER" spacing="2">
                        <Label fx:id="moyenneEnergieLabel" text="â€”" styleClass="stat-number" style="-fx-font-size: 28px;"/>
                        <Label text="Ã‰nergie moyenne" styleClass="stat-label"/>
                    </VBox>
                </HBox>
                <HBox styleClass="stat-card" spacing="10" alignment="CENTER" prefWidth="150">
                    <VBox alignment="CENTER" spacing="2">
                        <Label fx:id="moyenneStressLabel" text="â€”" styleClass="stat-number" style="-fx-font-size: 28px;"/>
                        <Label text="Stress moyen" styleClass="stat-label"/>
                    </VBox>
                </HBox>
                <HBox styleClass="stat-card" spacing="10" alignment="CENTER" prefWidth="150">
                    <VBox alignment="CENTER" spacing="2">
                        <Label fx:id="moyenneSommeilLabel" text="â€”" styleClass="stat-number" style="-fx-font-size: 28px;"/>
                        <Label text="Sommeil moyen" styleClass="stat-label"/>
                    </VBox>
                </HBox>
            </HBox>

            <!-- Tableau des habitudes -->
            <ScrollPane fitToWidth="true" styleClass="scroll-pane" VBox.vgrow="ALWAYS" style="-fx-padding: 20;">
                <VBox spacing="10">
                    <padding><Insets top="5" right="5" bottom="5" left="5"/></padding>

                    <!-- En-tÃªte du tableau -->
                    <HBox styleClass="section-box" alignment="CENTER_LEFT" spacing="10">
                        <padding><Insets top="12" right="20" bottom="12" left="20"/></padding>
                        <Label text="ðŸŒ¿  Liste des Habitudes" styleClass="section-title" style="-fx-font-size: 16px;" HBox.hgrow="ALWAYS"/>
                    </HBox>

                    <TableView fx:id="habitudeTable" VBox.vgrow="ALWAYS" minHeight="450"
                               style="-fx-background-color: white; -fx-border-color: #e2e8f0; -fx-border-radius: 10px; -fx-background-radius: 10px; -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.07), 8, 0, 0, 2);">
                        <columns>
                            <TableColumn fx:id="nomColumn" text="ðŸ·ï¸ Nom" prefWidth="160"
                                         style="-fx-font-weight: bold; -fx-font-size: 13px;"/>
                            <TableColumn fx:id="emotionColumn" text="ðŸ’­ Ã‰motion" prefWidth="130"
                                         style="-fx-font-weight: bold; -fx-font-size: 13px;"/>
                            <TableColumn fx:id="noteColumn" text="ðŸ“ Note" prefWidth="220"
                                         style="-fx-font-weight: bold; -fx-font-size: 13px;"/>
                            <TableColumn fx:id="energieColumn" text="âš¡ Ã‰nergie" prefWidth="100"
                                         style="-fx-font-weight: bold; -fx-font-size: 13px;"/>
                            <TableColumn fx:id="stressColumn" text="ðŸ˜° Stress" prefWidth="100"
                                         style="-fx-font-weight: bold; -fx-font-size: 13px;"/>
                            <TableColumn fx:id="sommeilColumn" text="ðŸ˜´ Sommeil" prefWidth="100"
                                         style="-fx-font-weight: bold; -fx-font-size: 13px;"/>
                            <TableColumn fx:id="dateColumn" text="ðŸ“… Date" prefWidth="120"
                                         style="-fx-font-weight: bold; -fx-font-size: 13px;"/>
                        </columns>
                        <placeholder>
                            <VBox alignment="CENTER" spacing="10">
                                <Label text="ðŸŒ¿" style="-fx-font-size: 48px; -fx-text-fill: #cbd5e0;"/>
                                <Label text="Aucune habitude enregistrÃ©e" styleClass="empty-title" style="-fx-font-size: 16px;"/>
                                <Label text="Cliquez sur &quot;+ Nouvelle Habitude&quot; pour commencer" styleClass="empty-subtitle"/>
                            </VBox>
                        </placeholder>
                    </TableView>
                </VBox>
            </ScrollPane>
        </VBox>
    </center>

    <bottom>
        <HBox styleClass="footer" alignment="CENTER_RIGHT" spacing="10">
            <padding><Insets top="15" right="20" bottom="15" left="20"/></padding>
            <Label fx:id="statusLabel" text="" styleClass="status-label" HBox.hgrow="ALWAYS"/>
            <Button text="âœï¸ Modifier" styleClass="edit-btn-header"
                    onAction="#modifierHabitude"/>
            <Button text="ðŸ—‘ï¸ Supprimer" styleClass="delete-btn-header"
                    onAction="#supprimerHabitude"/>
            <Button text="ðŸ““ Journal" styleClass="refresh-btn"
                    onAction="#allerAuJournal"/>
        </HBox>
    </bottom>

</BorderPane>